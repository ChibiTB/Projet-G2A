<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Capteurs en direct – DBreeze</title>
  <link rel="stylesheet" href="Vue/style.css">
  <link rel="stylesheet" href="Vue/temphum.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <div id="header-placeholder"></div>

  <main id="main-content" class="main-capteurs">
    <div class="containers">
      <h2>Température & Humidité – Suivi en temps réel</h2>
      <canvas id="graphiqueCapteurs"></canvas>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <script>
    async function includeHTML(selector, url) {
  const element = document.querySelector(selector);
  const response = await fetch(url);
  element.innerHTML = await response.text();

  // Ajout du padding-top une fois le header chargé
  if (selector === "#header-placeholder") {
    setTimeout(() => {
      const header = element.querySelector('.header');
      const main = document.getElementById('main-content');
      if (header && main) {
        const height = header.offsetHeight;
        main.style.paddingTop = `${height + 20}px`; // Ajoute 20px d'espace
      }
    }, 100);
  }

  // Ajout du padding-bottom une fois le footer chargé
  if (selector === "#footer-placeholder") {
    setTimeout(() => {
      const footer = element.querySelector('footer');
      const main = document.getElementById('main-content');
      if (footer && main) {
        const height = footer.offsetHeight;
        main.style.paddingBottom = `${20}px`; // Ajoute 20px d'espace
      }
    }, 100);
  }
}

    includeHTML("#header-placeholder", "header.html");
    includeHTML("#footer-placeholder", "footer.html");

    // Graphique
    const ctx = document.getElementById('graphiqueCapteurs').getContext('2d');

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['23h', '00h', '01h', '02h', '03h', '04h'],
        datasets: [
          {
            label: 'Température (°C)',
            data: [22.1, 22.8, 23.5, 24.0, 24.2, 23.7],
            borderColor: 'rgba(255, 99, 132, 1)',
            backgroundColor: 'rgba(255, 99, 132, 0.1)',
            tension: 0.3,
            fill: true
          },
          {
            label: 'Humidité (%)',
            data: [50, 52, 55, 58, 57, 54],
            borderColor: 'rgba(54, 162, 235, 1)',
            backgroundColor: 'rgba(54, 162, 235, 0.1)',
            tension: 0.3,
            fill: true
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: false,
            title: {
              display: true,
              text: 'Valeur'
            }
          },
          x: {
            title: {
              display: true,
              text: 'Heure'
            }
          }
        },
        plugins: {
          legend: {
            position: 'top'
          },
          title: {
            display: true,
            text: 'Évolution des valeurs sur la soirée'
          }
        }
      }
    });
  </script>

</body>
</html>
